{"version":3,"file":"367.index.js","mappings":";;;;;;;;;;AACA,0DAA4D;AAC5D,+CAA8D;AAC9D,2CAAyE;AACzE,yDAAiG;AACjG,6DAAwG;AACxG,4CAAsC;AAEtC,kBAAe,KAAK,EAAE,GAAG,IAAgB,EAAgB,EAAE;;IACzD,MAAM,EAAE,OAAO,EAAE,GAAG,yCAAkB,CAAC,GAAG,IAAI,CAAC,CAAC;IAEhD,oGAAoG;IACpG,4CAA4C;IAC5C,IAAI,OAAO,CAAC,GAAG,IAAI,IAAI,EAAE;QACvB,OAAO,WAAW,CAAC,iBAAiB,CAAC,CAAC;KACvC;IAED,iDAAiD;IACjD,8BAA8B;IAC9B,MAAM,WAAW,SAAG,OAAO,CAAC,GAAG,mCAAI,gBAAM,CAAC,GAAG,CAAC;IAC9C,MAAM,cAAc,GAAG,MAAM,wCAAiB,CAAC,WAAW,CAAC,CAAC;IAC5D,IAAI,QAAC,cAAc,CAAC,YAAY,0CAAE,QAAQ,GAAE;QAC1C,MAAM,IAAI,4DAAkC,CAAC,iBAAiB,EAAE,UAAU,CAAC,CAAC;KAC7E;IAED,IAAI;QACF,MAAM,IAAI,GAAG,gCAAwB,CAAC,OAAO,CAAC,CAAC;QAC/C,MAAM,GAAG,GAAG,MAAM,gBAAQ,CAAC,IAAI,CAAC,CAAC;QACjC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KACnB;IAAC,OAAO,CAAC,EAAE;QACV,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,sCAAsC,GAAG,CAAC,CAAC,CAAC;QAClE,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;KAC5B;AACH,CAAC,CAAC","sources":["webpack://snyk/./src/cli/commands/gen-driftignore.ts"],"sourcesContent":["import { MethodArgs } from '../args';\nimport { processCommandArgs } from './process-command-args';\nimport * as legacyError from '../../lib/errors/legacy-errors';\nimport { driftctl, parseGenDriftIgnoreFlags } from '../../lib/iac/drift';\nimport { getIacOrgSettings } from './test/iac-local-execution/org-settings/get-iac-org-settings';\nimport { UnsupportedEntitlementCommandError } from './test/iac-local-execution/assert-iac-options-flag';\nimport config from '../../lib/config';\n\nexport default async (...args: MethodArgs): Promise<any> => {\n  const { options } = processCommandArgs(...args);\n\n  // Ensure that this gen-driftignore command can only be runned when using `snyk iac gen-driftignore`\n  // Avoid `snyk gen-driftignore` direct usage\n  if (options.iac != true) {\n    return legacyError('gen-driftignore');\n  }\n\n  // Ensure that we are allowed to run that command\n  // by checking the entitlement\n  const orgPublicId = options.org ?? config.org;\n  const iacOrgSettings = await getIacOrgSettings(orgPublicId);\n  if (!iacOrgSettings.entitlements?.iacDrift) {\n    throw new UnsupportedEntitlementCommandError('gen-driftignore', 'iacDrift');\n  }\n\n  try {\n    const args = parseGenDriftIgnoreFlags(options);\n    const ret = await driftctl(args);\n    process.exit(ret);\n  } catch (e) {\n    const err = new Error('Error running `iac gen-driftignore` ' + e);\n    return Promise.reject(err);\n  }\n};\n"],"names":[],"sourceRoot":""}